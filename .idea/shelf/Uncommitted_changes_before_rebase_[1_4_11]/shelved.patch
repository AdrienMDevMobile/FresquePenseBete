Index: app/src/androidTest/java/com/micheladrien/android/fresquerappel/NotificationServiceTest.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.micheladrien.android.fresquerappel\r\n\r\nimport androidx.test.ext.junit.runners.AndroidJUnit4\r\nimport androidx.test.platform.app.InstrumentationRegistry\r\nimport androidx.test.rule.ActivityTestRule\r\nimport androidx.test.uiautomator.*\r\nimport com.micheladrien.fresquerappel.Main_activity\r\nimport com.micheladrien.fresquerappel.R\r\nimport org.junit.Before\r\nimport org.junit.Test\r\nimport org.junit.runner.RunWith\r\nimport org.junit.Assert.assertTrue\r\nimport org.junit.Rule\r\n\r\n//https://developer.android.com/training/testing/ui-automator\r\n//https://proandroiddev.com/testing-android-notifications-f147a572b257\r\n\r\n//https://proandroiddev.com/testing-android-notifications-f147a572b257\r\n@RunWith(AndroidJUnit4::class)\r\nclass NotificationServiceTest {\r\n\r\n    private val clearAllNotificationRes = \"com.android.systemui:id/dismiss_text\"\r\n\r\n    lateinit var mDevice : UiDevice\r\n\r\n    @get:Rule\r\n    val mainActivityTestRule : ActivityTestRule<Main_activity> = ActivityTestRule<Main_activity>(\r\n            Main_activity::class.java\r\n    )\r\n\r\n    @Before\r\n    fun setUp()\r\n    {\r\n        //injectInstrumentation(InstrumentationRegistry.getInstrumentation())\r\n        mDevice = UiDevice.getInstance(InstrumentationRegistry.getInstrumentation())\r\n    }\r\n\r\n\r\n\r\n    /*\r\n    https://stackoverflow.com/questions/28444765/how-to-detect-headsup-notification-in-uiautomator\r\n     */\r\n\r\n    //TODO Comment tester cela ?\r\n    @Test\r\n    fun createNotificationChannelTest() {\r\n\r\n        val timeout = 1000L\r\n\r\n        mDevice.openNotification()\r\n        mDevice.wait(Until.hasObject(By.pkg(\"com.android.systemui\")), 10000)\r\n\r\n\r\n        val expectedAppName = mainActivityTestRule.activity.getString(R.string.app_name)\r\n\r\n        mDevice.openNotification()\r\n        mDevice.wait(Until.hasObject(By.textStartsWith(expectedAppName)), timeout)\r\n        //TODO clear all res as string ressource\r\n        val clearAll: UiObject2 = mDevice.findObject(By.res(clearAllNotificationRes))\r\n        clearAll.click()\r\n        /*\r\n         * access Notification Center through resource id, package name, class name.\r\n         * if you want to check resource id, package name or class name of the specific view\r\n         * in the screen, run 'uiautomatorviewer' from command.\r\n         */\r\n        /*\r\n        val notificationStackScroller : UiSelector = UiSelector()\r\n                .packageName(\"com.android.systemui\")\r\n                .className(\"android.view.ViewGroup\")\r\n                .resourceId(\"com.android.systemui:id/notification_stack_scroller\")\r\n        val notificationStackScrollerUiObject : UiObject = mDevice.findObject(notificationStackScroller)\r\n        assertTrue(notificationStackScrollerUiObject.exists())\r\n        */\r\n\r\n\r\n        /*\r\n         * access top notification in the center through parent\r\n\r\n        UiObject notiSelectorUiObject = notificationStackScrollerUiObject.getChild(new UiSelector().index(0));\r\n        assertTrue(notiSelectorUiObject.exists());\r\n\r\n        notiSelectorUiObject.click();\r\n         */\r\n\r\n\r\n    }\r\n\r\n    //TODO Verifier que nous avons une notification Ã  la fin\r\n    fun createTimerNotification(){\r\n\r\n    }\r\n\r\n    //TODO Notification dispear when we click on it\r\n    fun tapTimerNotificationToMakeItDisapear(){\r\n\r\n    }\r\n\r\n    //TODO Est ce que cela appel bien la creation de notification ?\r\n    fun onReceiveCreateNotification(){\r\n\r\n    }\r\n\r\n    //TODO Notification shows correct informations\r\n    fun checkInfoOnTimerNotification(){\r\n\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/androidTest/java/com/micheladrien/android/fresquerappel/NotificationServiceTest.kt	(revision d8503d1c270751bdde4930909fbc5224130fa442)
+++ app/src/androidTest/java/com/micheladrien/android/fresquerappel/NotificationServiceTest.kt	(date 1609943318844)
@@ -16,6 +16,7 @@
 //https://proandroiddev.com/testing-android-notifications-f147a572b257
 
 //https://proandroiddev.com/testing-android-notifications-f147a572b257
+
 @RunWith(AndroidJUnit4::class)
 class NotificationServiceTest {
 
